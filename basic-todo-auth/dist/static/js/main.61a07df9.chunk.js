(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{254:function(e,t,a){e.exports=a(494)},259:function(e,t,a){},412:function(e,t,a){},494:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(248),c=a.n(o),l=(a(259),a(19)),i=a(20),s=a(23),u=a(21),m=a(22),d=function(e){return r.a.createElement("button",{className:"btn btn-"+e.btnType,onClick:e.onClick},e.children)},p=a(16),h=a(5),E={ADD_TODO:"ADD_TOD",REMOVE_TODO:"REMOVE_TODO",ADD_TODO_ERROR:"ADD_TODO_ERROR",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_ERROR:"LOGIN_ERROR",LOGOUT_SUCCESS:"LOGOUT_SUCCESS",REGISTER:"REGISTER",REGISTER_ERROR:"REGISTER_ERROR",REGISTER_SUCCESS:"REGISTER_SUCCESS"},f={addTask:function(e){return function(t,a,n){n.getFirebase;var r=n.getFirestore,o=a().firebase.auth.uid;r().collection("todos").add({title:e,createdAt:new Date,authorId:o}).then(function(){t({type:E.ADD_TODO,payload:e})}).catch(function(e){t({type:E.ADD_TODO_ERROR,err:e})})}},deleteTask:function(e){return{type:E.REMOVE_TODO,payload:e}}},b=a(42),g=a(251),O=a.n(g),v=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement("li",{className:"list-group-item text-center"},"loading...");return this.props.todos&&(t=this.props.todos.map(function(t,a){return r.a.createElement("li",{className:"list-group-item",key:t.id},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},t.title,r.a.createElement("br",null),r.a.createElement("span",{style:{color:"gray"}},"Created by ",t.authorId),",",r.a.createElement("span",{style:{paddingLeft:15,color:"lightgray"}},O()(t.createdAt.toDate().toString()).fromNow())),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(d,{onClick:function(){return e.props.deleteTask(t.id)},btnType:"danger"},"x"))))})),r.a.createElement("ul",{className:"list-group list-group-flush"},t)}}]),t}(n.Component);var N=Object(h.d)(Object(b.firestoreConnect)(["todos"]),Object(p.b)(function(e){return{todos:e.firestore.ordered.todos}},function(e){return Object(h.b)(f,e)}))(v),R=a(495),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={todo:""},a.onInputChange=function(e){a.setState({todo:e.target.value})},a.addTodoHandle=function(){a.props.addTask(a.state.todo)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.auth,n=t.authProfile;return a.uid?r.a.createElement("div",{className:"container mt-5"},r.a.createElement("p",null,"Welcome ",r.a.createElement("span",{style:{fontWeight:100,fontStyle:"italic"}},n.firstName," ",n.lastName)),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"card-title text-center"},"Todo App"),r.a.createElement("hr",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-9"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"todo",onChange:this.onInputChange,className:"form-control",placeholder:"Todo..."}))),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(d,{btnType:"info",onClick:function(){return e.props.addTask(e.state.todo)}},"Add Todo"))),r.a.createElement("div",null,r.a.createElement(N,null))))):r.a.createElement(R.a,{to:"/login"})}}]),t}(n.Component);var y=Object(p.b)(function(e){return{auth:e.firebase.auth,authProfile:e.firebase.profile}},function(e){return Object(h.b)(f,e)})(S),C=a(496),j=a(498),T=a(253),_=a(52),w={signIn:function(e){return function(t,a,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then(function(e){console.log(e),t({type:E.LOGIN_SUCCESS})}).catch(function(e){t({type:E.LOGIN_ERROR,err:e})})}},signOut:function(){return function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){console.log("Signout successful"),e({type:E.LOGOUT_SUCCESS})}).catch(function(e){return console.log(e)})}},register:function(e){return function(t,a,n){var r=n.getFirebase,o=(0,n.getFirestore)();r().auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){return o.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})}).then(function(){t({type:E.REGISTER_SUCCESS})}).catch(function(e){t({type:E.REGISTER_ERROR,err:e})})}}},D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error;return e.auth.uid?r.a.createElement(R.a,{to:"/"}):r.a.createElement("div",{className:"container mt-5"},r.a.createElement("h4",{className:"pb-3"},"Sign In"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange,className:"form-control",placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange,className:"form-control",placeholder:"***"})),r.a.createElement(d,{btnType:"info",onClick:this.handleSubmit},"Sing In"),r.a.createElement("div",{className:"text-center"},t?r.a.createElement("p",{className:"text-danger"},t):null))}}]),t}(n.Component),I=Object(p.b)(function(e){return{error:e.auth.authError,auth:e.firebase.auth}},function(e){return Object(h.b)(w,e)})(D),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},a.handleChange=function(e){a.setState(Object(_.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.register(a.state)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error;return e.auth.uid?r.a.createElement(R.a,{to:"/"}):r.a.createElement("div",{className:"container mt-5"},r.a.createElement("h4",{className:"pb-3"},"Sign Up"),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange,className:"form-control",placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange,className:"form-control",placeholder:"***"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange,className:"form-control",placeholder:"First Name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange,className:"form-control",placeholder:"Last Name"})),r.a.createElement(d,{btnType:"primary",onClick:this.handleSubmit},"Register"),r.a.createElement("div",null,t?r.a.createElement("p",{className:"text-center text-danger"},t):null))}}]),t}(n.Component),A=Object(p.b)(function(e){return{auth:e.firebase.auth,error:e.auth.authError}},function(e){return Object(h.b)(w,e)})(k),G=a(497),U=(a(412),Object(p.b)(function(e){return{auth:e.firebase.auth,authProfile:e.firebase.profile}},function(e){return Object(h.b)(w,e)})(function(e){var t=e.auth,a=e.authProfile,n=t.uid?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement("span",{style:{cursor:"pointer"},onClick:e.signOut,className:"nav-link"},"Sign Out")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(G.a,{to:"/profile",style:{backgroundColor:"green",borderRadius:300,color:"white"},className:"nav-link"},a.initials))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(G.a,{className:"nav-link",to:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(G.a,{className:"nav-link",to:"/register"},"Register")));return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("span",{className:"navbar-brand"},r.a.createElement(G.a,{to:"/"},"Navbar")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav justify-content-end"},n))))})),x=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(U,null),r.a.createElement(j.a,null,r.a.createElement(T.a,{exact:!0,path:"/",component:y}),r.a.createElement(T.a,{path:"/login",component:I}),r.a.createElement(T.a,{path:"/register",component:A}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=[],L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.ADD_TODO:return e=e.concat(t.payload);case E.ADD_TODO_ERROR:return console.log("add todo error: "),e;case E.REMOVE_TODO:return console.log("remove todo..."),(e=e.slice()).splice(t.payload,1),e;default:return e}},P=a(71),W={authError:null},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.LOGIN_SUCCESS:return Object(P.a)({},e,{authError:null});case E.LOGIN_ERROR:return Object(P.a)({},e,{authError:"Login fail"});case E.LOGOUT_SUCCESS:return e;case E.REGISTER_SUCCESS:return console.log("Signup success"),Object(P.a)({},e,{authError:null});case E.REGISTER_ERROR:return console.log("Signup Error"),Object(P.a)({},e,{authError:t.err.message});default:return e}},V=a(70),B=Object(h.c)({tasks:L,auth:M,firestore:V.firestoreReducer,firebase:b.firebaseReducer}),z=a(252),J=a(163),H=a.n(J);a(487),a(492);H.a.initializeApp({apiKey:"AIzaSyAW53ACc7WayUhwGkGUQf-byAA_39ZS-e8",authDomain:"react-todo-41a4d.firebaseapp.com",databaseURL:"https://react-todo-41a4d.firebaseio.com",projectId:"react-todo-41a4d",storageBucket:"react-todo-41a4d.appspot.com",messagingSenderId:"774358069044"});var K=H.a,Q=Object(h.e)(B,Object(h.d)(Object(h.a)(z.a.withExtraArgument({getFirebase:b.getFirebase,getFirestore:V.getFirestore})),Object(V.reduxFirestore)(K),Object(b.reactReduxFirebase)(K,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));Q.firebaseAuthIsReady.then(function(){c.a.render(r.a.createElement(p.a,{store:Q},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})})}},[[254,1,2]]]);
//# sourceMappingURL=main.61a07df9.chunk.js.map